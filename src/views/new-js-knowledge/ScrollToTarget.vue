<template>
  <div>
    
  <nav class="nav">
    <a class="actived" href="#title1">第一组图片</a>
    <a href="#title2">第二组图片</a>
    <a href="#title3">第三组图片</a>
  </nav>

  <main id="content">
    <article id="title1" class="item">
      <h2>第一组图片</h2>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528474361282&di=6eaa35252cf408813316fb94fa47056c&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201503%2F08%2F20150308231710_SR2y4.jpeg"
        alt="">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528474361282&di=6eaa35252cf408813316fb94fa47056c&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201503%2F08%2F20150308231710_SR2y4.jpeg"
        alt="">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528474361282&di=6eaa35252cf408813316fb94fa47056c&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201503%2F08%2F20150308231710_SR2y4.jpeg"
        alt="">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528474361282&di=6eaa35252cf408813316fb94fa47056c&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201503%2F08%2F20150308231710_SR2y4.jpeg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528474361282&di=6eaa35252cf408813316fb94fa47056c&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201503%2F08%2F20150308231710_SR2y4.jpeg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528474361282&di=6eaa35252cf408813316fb94fa47056c&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201503%2F08%2F20150308231710_SR2y4.jpeg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528474361282&di=6eaa35252cf408813316fb94fa47056c&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201503%2F08%2F20150308231710_SR2y4.jpeg">
    </article>
    <article id="title2" ref="title2" class="item">
      <h2>第二组图片</h2>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528475332766&di=df72e3d6818e5f32c66b15eb105f77f7&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201507%2F05%2F20150705140021_xT2UG.jpeg"
        alt="">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528475332766&di=df72e3d6818e5f32c66b15eb105f77f7&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201507%2F05%2F20150705140021_xT2UG.jpeg"
        alt="">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528475332766&di=df72e3d6818e5f32c66b15eb105f77f7&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201507%2F05%2F20150705140021_xT2UG.jpeg"
        alt="">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528475332766&di=df72e3d6818e5f32c66b15eb105f77f7&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201507%2F05%2F20150705140021_xT2UG.jpeg"
        alt="">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528475332766&di=df72e3d6818e5f32c66b15eb105f77f7&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201507%2F05%2F20150705140021_xT2UG.jpeg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528475332766&di=df72e3d6818e5f32c66b15eb105f77f7&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201507%2F05%2F20150705140021_xT2UG.jpeg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528475332766&di=df72e3d6818e5f32c66b15eb105f77f7&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201507%2F05%2F20150705140021_xT2UG.jpeg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528475332766&di=df72e3d6818e5f32c66b15eb105f77f7&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201507%2F05%2F20150705140021_xT2UG.jpeg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528475332766&di=df72e3d6818e5f32c66b15eb105f77f7&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201507%2F05%2F20150705140021_xT2UG.jpeg">
    </article>
    <article id="title3" ref="title3" class="item">
      <h2>第三组图片</h2>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1531717462948&di=c3271d5e43630793e666acc4cff898b9&imgtype=0&src=http%3A%2F%2Fh.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F1b4c510fd9f9d72aaf305d9ddc2a2834359bbbde.jpg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1531717462948&di=c3271d5e43630793e666acc4cff898b9&imgtype=0&src=http%3A%2F%2Fh.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F1b4c510fd9f9d72aaf305d9ddc2a2834359bbbde.jpg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1531717462948&di=c3271d5e43630793e666acc4cff898b9&imgtype=0&src=http%3A%2F%2Fh.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F1b4c510fd9f9d72aaf305d9ddc2a2834359bbbde.jpg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1531717462948&di=c3271d5e43630793e666acc4cff898b9&imgtype=0&src=http%3A%2F%2Fh.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F1b4c510fd9f9d72aaf305d9ddc2a2834359bbbde.jpg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1531717462948&di=c3271d5e43630793e666acc4cff898b9&imgtype=0&src=http%3A%2F%2Fh.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F1b4c510fd9f9d72aaf305d9ddc2a2834359bbbde.jpg">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1531717462948&di=c3271d5e43630793e666acc4cff898b9&imgtype=0&src=http%3A%2F%2Fh.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F1b4c510fd9f9d72aaf305d9ddc2a2834359bbbde.jpg">
    </article>
  </main>
  </div>
</template>

<script>
export default {
  name: "ScrollToTarget",
  mounted() {
    window.addEventListener('scroll', this.handleActive);
  },
  beforeDestroy() {
    // 销毁该事件
    window.removeEventListener("scroll", this.handleActive);
  },
  methods: {
    handleActive() {
      let currentNode = ""; 
      let nodeList = document.querySelectorAll(".item");
      // 获取出现在当前视口的dom节点
      nodeList.forEach(item => {
        // 这个dom元素距离视口顶部的距离
        if(item.getBoundingClientRect().top < 300) {
          currentNode = item;
        }
      })

      // 清除之前的actived class
      document.querySelector(".nav a.actived")
        .classList.remove("actived")

      // 找到字符串匹配的导航元素，使其高亮
      let navList = document.querySelectorAll(".nav a");
      navList.forEach(item => {
        if(item.href.indexOf(currentNode.id) > 0) {
          item.classList.add("actived");
        }
      })
    }
  }
}
</script>

<style scoped>
body,
html,
h1,
h2 {
  margin: 0
}

main {
  padding-top: 64px;
}

h2 {
  padding: 10px 20px;
}

img {
  width: 550px;
}

.nav {
  display: block;
  background-color: #fff;
  box-shadow: 0 1px 5px rgba(0, 0, 0, .2);
  color: #202425;
  z-index: 10;
  height: 60px;
  width: 100%;
  position: fixed;
  padding: 0 20px;
}

.nav a {
  display: inline-block;
  height: 64px;
  line-height: 64px;
  margin-right: 2px
}

.actived {
  color: red;
}

#content {
  max-width: 1200px;
  margin: auto;
  font-size: 0;
}

#content img {
  width: 400px;
  height: auto;
}
</style>